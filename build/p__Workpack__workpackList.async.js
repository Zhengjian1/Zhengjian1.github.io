(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{Q2VD:function(e,t,a){e.exports={cardList:"antd-pro-pages-workpack-workpack-list-cardList",card:"antd-pro-pages-workpack-workpack-list-card",wordDictDesc:"antd-pro-pages-workpack-workpack-list-wordDictDesc",item:"antd-pro-pages-workpack-workpack-list-item",extraImg:"antd-pro-pages-workpack-workpack-list-extraImg",newButton:"antd-pro-pages-workpack-workpack-list-newButton",cardAvatar:"antd-pro-pages-workpack-workpack-list-cardAvatar",cardDescription:"antd-pro-pages-workpack-workpack-list-cardDescription",pageHeaderContent:"antd-pro-pages-workpack-workpack-list-pageHeaderContent",contentLink:"antd-pro-pages-workpack-workpack-list-contentLink",tableListForm:"antd-pro-pages-workpack-workpack-list-tableListForm",submitButtons:"antd-pro-pages-workpack-workpack-list-submitButtons"}},UQXn:function(e,t,a){e.exports={allCheck:"antd-pro-pages-workpack-collection-create-form-allCheck",packName:"antd-pro-pages-workpack-collection-create-form-packName"}},goqd:function(e,t,a){"use strict";a.r(t);a("Mwp2");var n,c,r,i,l,o,s,d,p,k,m,h=a("VXEj"),u=(a("IzEo"),a("bx4M")),w=a("gWZ8"),f=a.n(w),E=(a("2qtc"),a("kLXV")),v=(a("Pwec"),a("CtXQ")),g=(a("14J3"),a("BMrR")),y=(a("+L6B"),a("2/Rp")),C=(a("jCWc"),a("kPKH")),D=(a("5NDa"),a("5rEg")),b=a("p0pE"),N=a.n(b),S=a("2Taf"),L=a.n(S),V=a("vZ4D"),M=a.n(V),A=a("l4Ni"),I=a.n(A),R=a("ujKo"),F=a.n(R),B=a("MhPg"),P=a.n(B),T=(a("y8nQ"),a("Vl3Y")),x=a("q1tI"),O=a.n(x),W=a("MuoO"),j=a("zHco"),Q=(a("sRBo"),a("kaz8")),q=a("UQXn"),J=a.n(q),X=Q["a"].Group,H=!0,z=(n=Object(W["connect"])(function(e){var t=e.workpack,a=e.loading;return{workpack:t,loading:a.models.list}}),c=T["a"].create(),n(r=c((i=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return a=I()(this,(e=F()(t)).call.apply(e,[this].concat(c))),a.state={checkedList:[],indeterminate:!0,checkAll:!1},a.onChangeOne=function(e){var t=a.props.channelData;a.setState({checkedList:e,indeterminate:!!e.length&&e.length<t.length,checkAll:e.length===t.length})},a.onCheckAllChange=function(e){var t=a.props.channelData;a.setState({checkedList:e.target.checked?t:[],indeterminate:!1,checkAll:e.target.checked})},a.onChange=function(e){var t=a.props.checkSceneName;t(e.target.value)},a}return P()(t,e),M()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.isEdit;if(t&&e.visible&&H){if("\u5168\u90e8"===e.data.channel)this.setState({checkAll:!0,checkedList:e.channelData});else{var a=e.data.channel.split(",");this.setState({checkedList:a})}H=!1}}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.onCancel,n=e.onCreate,c=e.form,r=e.data,i=e.isEdit,l=e.channelData,o=e.duplicateName,s=this.state,d=s.indeterminate,p=s.checkAll,k=s.checkedList,m=c.getFieldDecorator,h=p?["\u5168\u90e8"]:k;return t?O.a.createElement(E["a"],{visible:t,title:i?"\u7f16\u8f91\u8bcd\u5305":"\u6dfb\u52a0\u8bcd\u5305",onCancel:a,maskClosable:!1,onOk:function(){return n(h,o)}},O.a.createElement(T["a"],{layout:"vertical"},O.a.createElement(T["a"].Item,{label:"\u540d\u5b57"},m("title",{initialValue:r&&r.wordDictTitle,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u540d\u5b57"}]})(O.a.createElement(D["a"],{onChange:this.onChange,onBlur:this.onChange,allowClear:!0})),o?O.a.createElement("span",{className:J.a.packName},"\u8bcd\u5305\u540d\u91cd\u590d"):""),O.a.createElement(T["a"].Item,{label:"\u9009\u62e9\u9891\u9053",style:{marginBottom:8}},O.a.createElement("div",null,O.a.createElement("div",{style:{borderBottom:"1px solid #E9E9E9"}},O.a.createElement(Q["a"],{indeterminate:d,onChange:this.onCheckAllChange,checked:p},"\u5168\u90e8\u9891\u9053")),O.a.createElement("br",null),O.a.createElement(X,{options:l,value:k,onChange:this.onChangeOne}))),O.a.createElement(T["a"].Item,{label:"\u63cf\u8ff0"},m("description",{initialValue:r&&r.wordDictDesc,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63cf\u8ff0"}]})(O.a.createElement(D["a"].TextArea,{type:"textarea",onChange:function(){}}))))):""}}]),t}(x["Component"]),r=i))||r)||r),K=z,U=(l=Object(W["connect"])(function(e){var t=e.workpack;return{workpack:t}}),l((s=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return a=I()(this,(e=F()(t)).call.apply(e,[this].concat(c))),a.state={visible:!1,data:{},isEdit:!1,duplicateName:!1},a.showModal=function(e,t){var n=!1,c={};"edit"===t&&(n=!0,c=e),a.setState({visible:!0,isEdit:n,data:c})},a.handleCancel=function(){a.setState({visible:!1,duplicateName:!1})},a.handleCreate=function(e,t){var n=a.formRef.props.form,c=a.state,r=c.data,i=c.isEdit,l=a.props.dispatch;n.validateFields(function(c,o){c||t||a.checkSceneName(o.title)||(l(i?{type:"workpack/updateWordPack",payload:{dictId:r.dictId,wordDictTitle:o.title,wordDictDesc:o.description,channel:e}}:{type:"workpack/addWordPack",payload:{wordDictTitle:o.title,wordDictDesc:o.description,channel:e}}),n.resetFields(),a.setState({visible:!1}))})},a.saveFormRef=function(e){a.formRef=e},a.checkSceneName=function(e){var t=a.props.workpack.list,n=JSON.parse(JSON.stringify(t)),c=a.state.data,r=!1;return n.forEach(function(t){t.wordDictTitle!==c.wordDictTitle&&t.wordDictTitle===e&&(r=!0)}),a.setState({duplicateName:r}),r},a}return P()(t,e),M()(t,[{key:"componentDidMount",value:function(){var e=this.props.onRef;e(this)}},{key:"render",value:function(){var e=this.props.workpack.channelData,t=this.state,a=t.visible,n=t.data,c=t.isEdit,r=t.duplicateName;return O.a.createElement("div",null,O.a.createElement(K,{wrappedComponentRef:this.saveFormRef,visible:a,onCancel:this.handleCancel,onCreate:this.handleCreate,data:n,channelData:e,isEdit:c,duplicateName:r,checkSceneName:this.checkSceneName}))}}]),t}(x["Component"]),o=s))||o),Z=U,G=a("Q2VD"),Y=a.n(G),$=T["a"].Item,_=(d=Object(W["connect"])(function(e){var t=e.workpack,a=e.loading;return{workpack:t,loading:a.models.list}}),p=T["a"].create(),d(k=p((m=function(e){function t(){var e,a;L()(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return a=I()(this,(e=F()(t)).call.apply(e,[this].concat(c))),a.state={modal2Visible:!1,id:"",formValues:{}},a.handleAdd=function(){a.child.showModal()},a.handleEdit=function(e){a.child.showModal(e,"edit")},a.handleLinkMenu=function(e){var t=a.props.history;t.push({pathname:"/workpack/workpack-list/word/".concat(e.dictId),search:"?title=".concat(e.wordDictTitle)})},a.handleDel=function(e){a.setModal2Visible(!0,e.dictId)},a.deleteWorkPack=function(e){var t=a.props.dispatch;t({type:"workpack/deleteWordPack",payload:{id:e,onClose:function(){return a.setModal2Visible(!1)}}})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,c=t.form;c.validateFields(function(e,t){if(!e){var c=N()({},t);a.setState({formValues:c}),n({type:"workpack/seachWordPack",payload:c})}})},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:"workpack/seachWordPack",payload:{}})},a.onRef=function(e){a.child=e},a.setModal2Visible=function(e,t){a.setState({modal2Visible:e,id:t})},a}return P()(t,e),M()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"workpack/fetch",payload:{}}),e({type:"workpack/fetchChannel",payload:{}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.workpack.list,n=t.loading,c=t.form.getFieldDecorator,r=this.state,i=r.modal2Visible,l=r.id,o=O.a.createElement(T["a"],{onSubmit:this.handleSearch,layout:"inline"},O.a.createElement(g["a"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(C["a"],{md:8,sm:24},O.a.createElement($,{label:"\u8bcd\u5305",style:{width:"100%"}},c("packName")(O.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165",allowClear:!0})))),O.a.createElement(C["a"],{md:8,sm:24},O.a.createElement($,{label:"\u5173\u952e\u8bcd",style:{width:"100%"}},c("word")(O.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165",allowClear:!0})))),O.a.createElement(C["a"],{md:8,sm:24},O.a.createElement("span",{className:Y.a.submitButtons},O.a.createElement(y["a"],{type:"primary",htmlType:"submit",onClick:this.handleSeach},"\u641c\u7d22"),O.a.createElement(y["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u6e05\u7a7a"))))),s=function(t){return[O.a.createElement("a",{onClick:function(){return e.handleDel(t)}},O.a.createElement(v["a"],{type:"delete"}),"\xa0\u5220\u9664"),O.a.createElement("a",{onClick:function(){return e.handleEdit(t)}},O.a.createElement(v["a"],{type:"edit"}),"\xa0\u7f16\u8f91"),O.a.createElement("a",{onClick:function(){return e.handleLinkMenu(t)}},O.a.createElement(v["a"],{type:"menu-unfold"}),"\xa0\u5217\u8868")]};return O.a.createElement(j["a"],{title:"\u7ba1\u7406\u8bcd\u5305"},O.a.createElement(E["a"],{title:"\u63d0\u793a",centered:!0,visible:i,onOk:function(){return e.deleteWorkPack(l)},onCancel:function(){return e.setModal2Visible(!1)}},O.a.createElement("p",null,"\u786e\u8ba4\u5220\u9664\u8be5\u8bcd\u5305\u5417\uff1f")),O.a.createElement(Z,{onRef:this.onRef}),O.a.createElement("div",{className:Y.a.tableListForm},o),O.a.createElement("div",{className:Y.a.cardList},O.a.createElement(h["a"],{rowKey:"id",loading:n,grid:{gutter:24,lg:4,md:2,sm:1,xs:1},dataSource:[""].concat(f()(a)),renderItem:function(t,a){return t?O.a.createElement(h["a"].Item,{key:t.id},O.a.createElement(u["a"],{hoverable:!0,className:Y.a.card,title:O.a.createElement("a",null,t.wordDictTitle),actions:s(t,a)},O.a.createElement("div",{className:Y.a.wordDictDesc},t.wordDictDesc))):O.a.createElement(h["a"].Item,{onClick:e.handleAdd},O.a.createElement(y["a"],{type:"dashed",className:Y.a.newButton},O.a.createElement(v["a"],{type:"plus"})," \u65b0\u5efa\u8bcd\u5305"))}})))}}]),t}(x["PureComponent"]),k=m))||k)||k);t["default"]=_}}]);