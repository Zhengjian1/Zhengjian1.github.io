(this["webpackJsonpmy-demo"]=this["webpackJsonpmy-demo"]||[]).push([[5],{177:function(e,t,a){},293:function(e,t,a){var n=a(294);window.local_storage_demo=n([]),e.exports=n},294:function(e,t,a){var n=a(295),r=a(296),o=a(297),c=a(92),l=c.handleSuccessCb,i=c.handleStorageList;e.exports=function(e){var t=i(e);return{storager:window.localStorage,get:function(e,a,r){var o,c={storager:this.storager,storageList:t,key:e,failCb:r};return n(c),this.storager[e]&&(o=this.storager.getItem(e))&&(o=JSON.parse(o)),l({key:e,value:o,successCb:a}),o},set:function(e,a,n,o){var c={storager:this.storager,storageList:t,key:e,failCb:o};r(c),"undefined"!==typeof a&&(a=JSON.stringify(a),this.storager.setItem(e,a)),l({key:e,value:a,successCb:n})},remove:function(e,a,n){var r={storager:this.storager,storageList:t,key:e,failCb:n};o(r),this.storager.removeItem(e),l({key:e,successCb:a})},clear:function(e){this.storager.clear(),l({successCb:e})}}}},295:function(e,t,a){var n=a(92).handleFailCb;e.exports=function(e){var t=e.storager,a=e.storageList,r=e.key,o=e.failCb,c="";switch(!0){case!!a.hasOwnProperty(r):if(t.hasOwnProperty(r)){var l=[];["key","fromPage","use","des"].forEach((function(e){a[r].hasOwnProperty(e)||l.push(e)})),l.length&&(c="\u9879\u76ee\u7684src/constants\u6587\u4ef6\u914d\u7f6e\u7684".concat(r,"\u952e\u5bf9\u8c61\u7f3a\u5c11").concat(l.join(),"\u5b57\u6bb5,\u8bf7\u5148\u914d\u7f6e").concat(l.join(),"\u5b57\u6bb5"))}else c="localStorage\u6ca1\u6709".concat(r,"\u952e\uff0c\u8bf7\u786e\u8ba4\u662f\u5426\u5b58\u8fc7").concat(r,"\u952e");break;default:c="\u8bf7\u5148\u53bb\u68c0\u67e5\u914d\u7f6e\u7684\u5217\u8868\u914d\u7f6e".concat(r,"\u952e")}n({errorMsg:c,failCb:o})}},296:function(e,t,a){var n=a(92).handleFailCb;e.exports=function(e){var t=e.storager,a=e.storageList,r=e.key,o=e.failCb,c="";switch(!0){case!a.hasOwnProperty(r):c="\u8bf7\u5148\u53bb\u68c0\u67e5\u914d\u7f6e\u7684\u5217\u8868\u914d\u7f6e".concat(r,"\u952e\u914d\u7f6e").concat(r,"\u952e");break;case t.hasOwnProperty(r):c="".concat(r,"\u952e\u5df2\u7ecf\u88ab\u4f7f\u7528\uff0c\u8bf7\u66f4\u6362key\u503c")}n({errorMsg:c,failCb:o})}},297:function(e,t,a){var n=a(92).handleFailCb;e.exports=function(e){var t=e.storager,a=e.storageList,r=e.key,o=e.failCb,c="";switch(!0){case!a.hasOwnProperty(r):c="\u8bf7\u5148\u53bb\u68c0\u67e5\u914d\u7f6e\u7684\u5217\u8868\u914d\u7f6e".concat(r,"\u952e,\u8bf7\u68c0\u67e5\u662f\u5426\u6ca1\u6709\u5b58\u50a8").concat(r,"\u952e");case!t.hasOwnProperty(r):c="\u672c\u5730localStorage \u6ca1\u6709\u5b58\u50a8".concat(r,"\u952e,\u8bf7\u5148\u5b58\u50a8").concat(r,"\u952e")}n({errorMsg:c,failCb:o})}},341:function(e,t,a){},343:function(e,t){e.exports=[]},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},376:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(298),c=a(299),l=a(365),i=a(68),s=a(172),u=a(371),m=a(382),f=a(375),d=a(72),b=a(373),y=(a(177),a(374)),g=a(377),p=a(379),h=a(61),v=a(200),E=a.n(v),k={dbName:"storage",version:1,tables:[{tableName:"storage_list",option:{keyPath:"id"},indexs:[{key:"id",option:{unique:!0}},{key:"key"},{key:"fromPage"},{key:"use"},{key:"des"}]}]};function w(){return new Promise((function(e,t){E()(k).then((function(t){t.queryAll({tableName:"storage_list",success:function(t){return e(t)}})}),(function(e){t(e)}))}))}function C(){return new Promise((function(){E()(k).then((function(e){e.close_db()}),(function(e){console.error(e)}))}))}var O=Object(h.e)(1e6,9999999),j={labelCol:{span:6},wrapperCol:{span:18}},P={wrapperCol:{offset:6,span:18}};var S=Object(n.memo)((function(e){var t=y.a.useForm(),a=Object(i.a)(t,1)[0];return r.a.createElement(g.a,{title:"\u589e\u52a0\u914d\u7f6e\u8868",visible:e.visible,onCancel:e.handleCancel,footer:!1},r.a.createElement(y.a,Object.assign({form:a},j,{name:"basic",initialValues:{remember:!0},onFinish:function(t){w().then((function(n){var r,o=!1;n.forEach((function(e){t.key===e.key&&(o=!0)})),o?m.b.error("".concat(t.key,"\u5df2\u7ecf\u91cd\u540d,\u8bf7\u66f4\u6362")):((r=Object(s.a)({id:O++},t),new Promise((function(e,t){E()(k).then((function(t){t.insert({tableName:"storage_list",data:r,success:function(t){return e(t)}})}),(function(e){t(e)}))}))).then((function(){return m.b.success("".concat(t.key,"\u589e\u52a0\u6210\u529f"))})),a.resetFields(),e.handleCancel("add".concat(O)))}))}}),r.a.createElement(y.a.Item,{label:"key",name:"key",rules:[{required:!0,message:"Please input key!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,{label:"fromPage",name:"fromPage",rules:[{required:!0,message:"Please input fromPage!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,{label:"use",name:"use",rules:[{required:!0,message:"Please input use!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,{label:"des",name:"des",rules:[{required:!0,message:"Please input des!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,P,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Submit"))))})),F=a(293),I={visible:!1,actionType:"",storageList:[]};function _(e,t){switch(t.type){case"add":case"del":case"save":case"closeModal":return Object(s.a)(Object(s.a)({},e),t.payload);default:return e}}var x=function(){var e=function(){var e=["key","fromPage","use","des","action"].map((function(e){return{title:e,dataIndex:e,key:e}}));return e[e.length-1].render=function(e,t){return r.a.createElement(u.a,{title:"\u786e\u4fe1\u5220\u9664?",onConfirm:function(){var e;(function(e){return new Promise((function(t,a){E()(k).then((function(a){a.delete_by_primaryKey({tableName:"storage_list",target:e,success:function(e){return t(e)}})}),(function(e){a(e)}))}))})(e=t.id).then((function(){c({type:"del",payload:{actionType:"del".concat(e)}}),m.b.success("\u5220\u9664\u6210\u529f")}))}},r.a.createElement("a",null,"\u5220\u9664"))},e}(),t=Object(n.useReducer)(_,I),a=Object(i.a)(t,2),o=a[0],c=a[1];Object(n.useEffect)((function(){return w().then((function(e){var t=[];e.forEach((function(e){Object.keys(e).length&&t.push(e)})),c({type:"save",payload:{visible:!1,storageList:[].concat(t)}}),window.local_storage_demo=F(t)})),C}),[o.actionType]);var s=Object(n.useCallback)((function(e){!function(e){c({type:"closeModal",payload:{visible:!1,actionType:e}})}(e)}),[]);return r.a.createElement("div",{className:"site-card-border-less-wrapper"},r.a.createElement(f.a,{title:"\u68c0\u67e5\u914d\u7f6e\u5217\u8868",bordered:!1,headStyle:{textAlign:"center"},style:{width:"100%",minHeight:"100vh"}},r.a.createElement(d.a,{onClick:function(){c({type:"add",payload:{visible:!0}})},type:"primary",style:{marginBottom:16}},"\u6dfb\u52a0"),r.a.createElement(b.a,{dataSource:Object(l.a)(o.storageList),columns:e,pagination:!1}),r.a.createElement(S,{visible:o.visible,handleCancel:s})))},L=(a(341),a(342)),q=a.n(L),M=["key","value"].map((function(e){return{title:e,dataIndex:e,key:e}}));var N=function(){var e=Object(h.d)(q.a.storager),t=Object(n.useState)(e),a=Object(i.a)(t,2),o=a[0],c=a[1];return Object(n.useEffect)((function(){function e(){c((function(){return Object(h.d)(q.a.storager)}))}return window.addEventListener("storage",e,!1),function(){window.removeEventListener("storage",e,!1)}}),[]),r.a.createElement("div",{className:"site-card-border-less-wrapper"},r.a.createElement(f.a,{title:"\u672c\u5730localStroage\u7684\u5217\u8868",bordered:!1,headStyle:{textAlign:"center"},style:{width:"100%",minHeight:"100vh"}},r.a.createElement(b.a,{dataSource:o,columns:M,pagination:!1})))},T=a(378),A=(a(349),a(350),{labelCol:{span:4},wrapperCol:{span:20}}),J={wrapperCol:{offset:4,span:20}};var V=function(){var e=y.a.useForm(),t=Object(i.a)(e,1)[0];function a(e,a){Object(h.c)("localStorage\u8bbe\u7f6e\u6210\u529f\uff0ckey\uff1a".concat(e,"\uff0cvalue\uff1a").concat(a)),t.resetFields(),Object(h.f)()}return r.a.createElement(y.a,Object.assign({form:t},A,{name:"basic",initialValues:{remember:!0},onFinish:function(e){var t=e.key,n=e.value;window.local_storage_demo.set(t,n,a,h.b)}}),r.a.createElement(y.a.Item,{label:"key",name:"key",rules:[{required:!0,message:"Please input localStorage key!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,{label:"value",name:"value",rules:[{required:!0,message:"Please input localStorage value!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,J,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Submit")))};a(351);var H=function(){var e=y.a.useForm(),t=Object(i.a)(e,1)[0];function a(e,a){Object(h.c)("key\u4e3a".concat(e,",\u83b7\u53d6\u7684\u503c\u4e3a:").concat(a)),t.resetFields()}return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{form:t,layout:"inline",onFinish:function(e){window.local_storage_demo.get(e.key,a,h.b)},initialValues:{remember:!0}},r.a.createElement(y.a.Item,{label:"key",name:"key",placeholder:"key",rules:[{required:!0,message:"Please input localStorage key!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Submit"))))};a(352);var K=function(){var e=y.a.useForm(),t=Object(i.a)(e,1)[0];function a(e){Object(h.c)("key\u4e3a".concat(e,"\u79fb\u9664\u6210\u529f")),Object(h.f)()}return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{form:t,layout:"inline",onFinish:function(e){window.local_storage_demo.remove(e.key,a,h.b)},initialValues:{remember:!0}},r.a.createElement(y.a.Item,{label:"key",name:"key",placeholder:"key",rules:[{required:!0,message:"Please input localStorage key!"}]},r.a.createElement(p.a,{allowClear:!0})),r.a.createElement(y.a.Item,null,r.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Submit"))))};a(353);var B=function(){function e(){Object(h.c)("\u6e05\u9664\u6240\u6709localStorage\u6210\u529f"),Object(h.f)()}return r.a.createElement("div",null,r.a.createElement(d.a,{type:"primary",onClick:function(){window.local_storage_demo.clear(e)}},"Submit"))},R=T.a.Panel;var W=function(){return r.a.createElement("div",{className:"site-card-border-less-wrapper"},r.a.createElement(f.a,{title:"localStorage\u64cd\u4f5c",bordered:!1,headStyle:{textAlign:"center"},style:{width:"100%",minHeight:"100vh"}},r.a.createElement(T.a,{defaultActiveKey:["1"]},r.a.createElement(R,{header:"\u8bbe\u7f6e",key:"1"},r.a.createElement(V,null)),r.a.createElement(R,{header:"\u83b7\u53d6",key:"2"},r.a.createElement(H,null)),r.a.createElement(R,{header:"\u79fb\u9664",key:"3"},r.a.createElement(K,null)),r.a.createElement(R,{header:"\u6e05\u7a7a",key:"4"},r.a.createElement(B,null)))))};t.default=function(){return r.a.createElement(o.a,null,r.a.createElement(c.a,{span:8},r.a.createElement(x,null)),r.a.createElement(c.a,{span:8},r.a.createElement(N,null)),r.a.createElement(c.a,{span:8},r.a.createElement(W,null)))}},61:function(e,t,a){"use strict";a.d(t,"d",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(381);function r(e){var t=["key","getItem","setItem","removeItem","clear","length"],a=[];for(var n in e)t.indexOf(n)<0&&a.push({key:n,value:e[n]});return a}function o(){var e;(e=300,new Promise((function(t){return setTimeout(t,e)}))).then((function(){return window.location.reload(!0)}))}function c(e){n.a.error({message:e})}function l(e){n.a.success({message:e})}function i(e,t,a){if(void 0===a&&("boolean"==typeof t?(a=t,t=void 0):"boolean"==typeof e&&(a=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):void 0===t&&(t=e,e=0),e>t){var n=e;e=t,t=n}if(a||e%1||t%1){var r=Math.random(),o="".concat(r).length-1;return Math.min(e+(parseFloat("1e-".concat(o)),t))}return e+Math.floor(Math.random()*(t-e+1))}function s(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],a=!0,n=0;n<t.length;n++)if(e.indexOf(t[n])>0){a=!1;break}return a}},92:function(e,t){function a(e){return"[object Function]"===Object.prototype.toString.call(e)}e.exports={isFunction:a,handleSuccessCb:function(e){var t=e.key,n=e.value,r=e.successCb;a(r)&&r&&r(t,n)},handleFailCb:function(e){var t=e.errorMsg,n=e.failCb;if(t)throw a(n)&&n&&n(t),new Error(t)},handleStorageList:function(e){return e.reduce((function(e,t){return e[t.key]=t,e}),{})}}}}]);
//# sourceMappingURL=5.51b1fc55.chunk.js.map